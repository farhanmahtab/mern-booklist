{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nexport const signUp = createAsyncThunk(\"users/signUp\", async user => {\n  const res = await axios.post(\"http://localhost:5001/api/users/signUp\", {\n    name: user.name,\n    email: user.email,\n    password: user.password\n  });\n  console.log(res.data);\n  localStorage.setItem(\"token\", \"Bearer \" + res.data.token);\n  return res.data;\n});\nexport const logIn = createAsyncThunk(\"users/login\", async user => {\n  console.log(user);\n  const login_URL = \"http://localhost:5001/api/users/login\";\n  let res;\n  try {\n    res = await axios.post(login_URL, {\n      email: user.email,\n      password: user.password\n    });\n  } catch (e) {}\n  console.log(res);\n  localStorage.setItem(\"token\", \"Bearer \" + res.data.token);\n  return res.data;\n});\nconst usersSlice = createSlice({\n  name: \"users\",\n  initialState: {\n    currentUser: localStorage.getItem(\"token\") || \"\"\n  },\n  reducers: {\n    logOut: state => {\n      state.currentUser = \"\";\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(signUp.pending, state => {\n      state.isLoading = true;\n    });\n    builder.addCase(signUp.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.currentUser = action.payload;\n    });\n    builder.addCase(logIn.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.currentUser = action.payload;\n    });\n  }\n});\nexport const {\n  logOut\n} = usersSlice.actions;\nexport default usersSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","signUp","user","res","post","name","email","password","console","log","data","localStorage","setItem","token","logIn","login_URL","e","usersSlice","initialState","currentUser","getItem","reducers","logOut","state","extraReducers","builder","addCase","pending","isLoading","fulfilled","action","payload","actions","reducer"],"sources":["/home/sbh/office_Docs/redux_task/client/src/features/users/UserSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\n\nexport const signUp = createAsyncThunk(\"users/signUp\", async (user) => {\n  const res = await axios.post(\"http://localhost:5001/api/users/signUp\", {\n    name: user.name,\n    email: user.email,\n    password: user.password,\n  });\n  console.log(res.data);\n  localStorage.setItem(\"token\", \"Bearer \" + res.data.token);\n  return res.data;\n});\n\nexport const logIn = createAsyncThunk(\"users/login\", async (user) => {\n  console.log(user);\n  const login_URL = \"http://localhost:5001/api/users/login\";\n  let res \n try{ res= await axios.post(login_URL, {\n    email: user.email,\n    password: user.password,\n  });}\n  catch(e){\n    \n  }\n  console.log(res);\n  localStorage.setItem(\"token\", \"Bearer \" + res.data.token);\n  return res.data;\n});\n\nconst usersSlice = createSlice({\n  name: \"users\",\n  initialState: {\n    currentUser: localStorage.getItem(\"token\") || \"\",\n  },\n  reducers: {\n    logOut: (state) => {\n      state.currentUser = \"\";\n    },\n  },\n  extraReducers: (builder) => {\n    builder.addCase(signUp.pending, (state) => {\n      state.isLoading = true;\n    });\n    builder.addCase(signUp.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.currentUser = action.payload;\n    });\n    builder.addCase(logIn.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.currentUser = action.payload;\n    });\n  },\n});\n\nexport const { logOut } = usersSlice.actions;\nexport default usersSlice.reducer;\n"],"mappings":"AAAA,SAASA,gBAAgB,EAAEC,WAAW,QAAQ,kBAAkB;AAChE,OAAOC,KAAK,MAAM,OAAO;AAEzB,OAAO,MAAMC,MAAM,GAAGH,gBAAgB,CAAC,cAAc,EAAE,MAAOI,IAAI,IAAK;EACrE,MAAMC,GAAG,GAAG,MAAMH,KAAK,CAACI,IAAI,CAAC,wCAAwC,EAAE;IACrEC,IAAI,EAAEH,IAAI,CAACG,IAAI;IACfC,KAAK,EAAEJ,IAAI,CAACI,KAAK;IACjBC,QAAQ,EAAEL,IAAI,CAACK;EACjB,CAAC,CAAC;EACFC,OAAO,CAACC,GAAG,CAACN,GAAG,CAACO,IAAI,CAAC;EACrBC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAE,SAAS,GAAGT,GAAG,CAACO,IAAI,CAACG,KAAK,CAAC;EACzD,OAAOV,GAAG,CAACO,IAAI;AACjB,CAAC,CAAC;AAEF,OAAO,MAAMI,KAAK,GAAGhB,gBAAgB,CAAC,aAAa,EAAE,MAAOI,IAAI,IAAK;EACnEM,OAAO,CAACC,GAAG,CAACP,IAAI,CAAC;EACjB,MAAMa,SAAS,GAAG,uCAAuC;EACzD,IAAIZ,GAAG;EACR,IAAG;IAAEA,GAAG,GAAE,MAAMH,KAAK,CAACI,IAAI,CAACW,SAAS,EAAE;MACnCT,KAAK,EAAEJ,IAAI,CAACI,KAAK;MACjBC,QAAQ,EAAEL,IAAI,CAACK;IACjB,CAAC,CAAC;EAAC,CAAC,CACJ,OAAMS,CAAC,EAAC,CAER;EACAR,OAAO,CAACC,GAAG,CAACN,GAAG,CAAC;EAChBQ,YAAY,CAACC,OAAO,CAAC,OAAO,EAAE,SAAS,GAAGT,GAAG,CAACO,IAAI,CAACG,KAAK,CAAC;EACzD,OAAOV,GAAG,CAACO,IAAI;AACjB,CAAC,CAAC;AAEF,MAAMO,UAAU,GAAGlB,WAAW,CAAC;EAC7BM,IAAI,EAAE,OAAO;EACba,YAAY,EAAE;IACZC,WAAW,EAAER,YAAY,CAACS,OAAO,CAAC,OAAO,CAAC,IAAI;EAChD,CAAC;EACDC,QAAQ,EAAE;IACRC,MAAM,EAAGC,KAAK,IAAK;MACjBA,KAAK,CAACJ,WAAW,GAAG,EAAE;IACxB;EACF,CAAC;EACDK,aAAa,EAAGC,OAAO,IAAK;IAC1BA,OAAO,CAACC,OAAO,CAACzB,MAAM,CAAC0B,OAAO,EAAGJ,KAAK,IAAK;MACzCA,KAAK,CAACK,SAAS,GAAG,IAAI;IACxB,CAAC,CAAC;IACFH,OAAO,CAACC,OAAO,CAACzB,MAAM,CAAC4B,SAAS,EAAE,CAACN,KAAK,EAAEO,MAAM,KAAK;MACnDP,KAAK,CAACK,SAAS,GAAG,KAAK;MACvBL,KAAK,CAACJ,WAAW,GAAGW,MAAM,CAACC,OAAO;IACpC,CAAC,CAAC;IACFN,OAAO,CAACC,OAAO,CAACZ,KAAK,CAACe,SAAS,EAAE,CAACN,KAAK,EAAEO,MAAM,KAAK;MAClDP,KAAK,CAACK,SAAS,GAAG,KAAK;MACvBL,KAAK,CAACJ,WAAW,GAAGW,MAAM,CAACC,OAAO;IACpC,CAAC,CAAC;EACJ;AACF,CAAC,CAAC;AAEF,OAAO,MAAM;EAAET;AAAO,CAAC,GAAGL,UAAU,CAACe,OAAO;AAC5C,eAAef,UAAU,CAACgB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}