{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nexport const fetchBooks = createAsyncThunk(\"books/fetchBooks\", async () => {\n  const res = await axios.get(\"http://localhost:5001/api/books\");\n  //console.log(res.data)\n  return res.data;\n});\n// const initialBooks = {\n//   books: [\n//     {\n//       id: 1,\n//       name: \"Book 1 \",\n//       author: \"author 1\",\n//       price: \"500\",\n//     },\n//     {\n//       id: 2,\n//       name: \"Book 2 \",\n//       author: \"author 2\",\n//       price: \"600\",\n//     },\n//     {\n//       id: 3,\n//       name: \"Book 3 \",\n//       author: \"author 3\",\n//       price: \"550\",\n//     },\n//   ],\n// }; \n\nexport const bookSlice = createSlice({\n  name: \"books\",\n  initialState: {\n    isLoading: false,\n    books: [],\n    error: null\n  },\n  reducers: {\n    showBooks: state => state,\n    addBook: (state, action) => {\n      state.books.push(action.payload);\n    },\n    deleteBook: (state, action) => {\n      const id = action.payload;\n      state.books = state.books.filter(book => book.id !== id);\n    },\n    updateBook: (state, action) => {\n      const {\n        id,\n        name,\n        author,\n        price\n      } = action.payload;\n      const isBookExist = state.books.filter(book => book.id === id);\n      if (isBookExist) {\n        isBookExist[0].name = name;\n        isBookExist[0].author = author;\n        isBookExist[0].price = price;\n      }\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(fetchBooks.pending, state => {\n      state.isLoading = true;\n    });\n    builder.addCase(fetchBooks.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.items = action.payload;\n      state.error = null;\n    });\n    builder.addCase(fetchBooks.rejected, (state, action) => {\n      state.isLoading = false;\n      state.items = [...state.items];\n      state.error = action.payload;\n    });\n  }\n});\nexport default bookSlice.reducer;\nexport const {\n  showBooks,\n  addBook,\n  deleteBook,\n  updateBook,\n  booksLoading\n} = bookSlice.actions;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","fetchBooks","res","get","data","bookSlice","name","initialState","isLoading","books","error","reducers","showBooks","state","addBook","action","push","payload","deleteBook","id","filter","book","updateBook","author","price","isBookExist","extraReducers","builder","addCase","pending","fulfilled","items","rejected","reducer","booksLoading","actions"],"sources":["/home/sbh/office_Docs/redux_task/client/src/features/books/BookSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\n\nexport const fetchBooks = createAsyncThunk(\"books/fetchBooks\", async() => {\n  const res = await axios.get(\"http://localhost:5001/api/books\")\n  //console.log(res.data)\n  return res.data\n})\n// const initialBooks = {\n//   books: [\n//     {\n//       id: 1,\n//       name: \"Book 1 \",\n//       author: \"author 1\",\n//       price: \"500\",\n//     },\n//     {\n//       id: 2,\n//       name: \"Book 2 \",\n//       author: \"author 2\",\n//       price: \"600\",\n//     },\n//     {\n//       id: 3,\n//       name: \"Book 3 \",\n//       author: \"author 3\",\n//       price: \"550\",\n//     },\n//   ],\n// }; \n\nexport const bookSlice = createSlice({\n  name: \"books\",\n  initialState: {\n    isLoading :false,\n    books:[],\n    error:null\n  },\n  reducers: {\n    showBooks: (state) => state,\n    addBook: (state, action) => {\n      state.books.push(action.payload);\n    },\n    deleteBook: (state, action) => {\n      const id = action.payload;\n      state.books = state.books.filter((book) => book.id !== id);\n    },\n    updateBook: (state, action) => {\n      const { id, name, author,price } = action.payload;\n      const isBookExist = state.books.filter((book) => book.id === id);\n      if (isBookExist) {\n        isBookExist[0].name = name;\n        isBookExist[0].author = author;\n        isBookExist[0].price = price;\n\n      }\n    },\n  },\n  extraReducers : (builder) =>{\n    builder.addCase(fetchBooks.pending, (state) => {\n      state.isLoading = true\n    })\n    builder.addCase(fetchBooks.fulfilled, (state, action) => {\n      state.isLoading = false\n      state.items = action.payload\n      state.error = null\n    })\n    builder.addCase(fetchBooks.rejected, (state, action) => {\n      state.isLoading = false\n      state.items = [...state.items]\n      state.error = action.payload\n    })\n  }\n});\n\nexport default bookSlice.reducer;\nexport const { showBooks, addBook, deleteBook, updateBook,booksLoading } = bookSlice.actions;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}