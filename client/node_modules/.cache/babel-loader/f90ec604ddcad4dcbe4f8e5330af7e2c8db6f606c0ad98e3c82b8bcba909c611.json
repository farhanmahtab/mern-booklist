{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nexport const fetchBooks = createAsyncThunk(\"books/fetchBooks\", async () => {\n  const res = await axios.get(\"http://localhost:5001/api/books\");\n  console.log(res.data);\n  return res.data;\n});\nconst initialBooks = {\n  books: [{\n    id: 1,\n    title: \"Book 1 \",\n    author: \"author 1\",\n    price: \"500\"\n  }, {\n    id: 2,\n    title: \"Book 2 \",\n    author: \"author 2\",\n    price: \"600\"\n  }, {\n    id: 3,\n    title: \"Book 3 \",\n    author: \"author 3\",\n    price: \"550\"\n  }]\n};\nexport const bookSlice = createSlice({\n  name: \"books\",\n  initialState: {\n    isLoading: false,\n    books: [],\n    error: null\n  },\n  // reducers: {\n  //   showBooks: (state) => state,\n  //   addBook: (state, action) => {\n  //     state.books.push(action.payload);\n  //   },\n  //   deleteBook: (state, action) => {\n  //     const id = action.payload;\n  //     state.books = state.books.filter((book) => book.id !== id);\n  //   },\n  //   updateBook: (state, action) => {\n  //     const { id, title, author,price } = action.payload;\n  //     const isBookExist = state.books.filter((book) => book.id === id);\n  //     if (isBookExist) {\n  //       isBookExist[0].title = title;\n  //       isBookExist[0].author = author;\n  //       isBookExist[0].price = price;\n\n  //     }\n  //   },\n  // },\n  extraReducers: builder => {\n    builder.addCase(fetchBooks.pending, state => {\n      state.isLoading = true;\n    });\n    builder.addCase(fetchBooks.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.items = action.payload;\n      state.error = null;\n    });\n    builder.addCase(fetchBooks.rejected, (state, action) => {\n      state.isLoading = false;\n      state.items = [...state.items];\n      state.error = action.payload;\n    });\n  }\n});\n\n//export const { showBooks, addBook, deleteBook, updateBook,booksLoading } = bookSlice.actions;\nexport default bookSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","fetchBooks","res","get","console","log","data","initialBooks","books","id","title","author","price","bookSlice","name","initialState","isLoading","error","extraReducers","builder","addCase","pending","state","fulfilled","action","items","payload","rejected","reducer"],"sources":["/home/sbh/office_Docs/redux_task/client/src/features/books/BookSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\n\nexport const fetchBooks = createAsyncThunk(\"books/fetchBooks\", async() => {\n  const res = await axios.get(\"http://localhost:5001/api/books\")\n  console.log(res.data)\n  return res.data\n})\nconst initialBooks = {\n  books: [\n    {\n      id: 1,\n      title: \"Book 1 \",\n      author: \"author 1\",\n      price: \"500\",\n    },\n    {\n      id: 2,\n      title: \"Book 2 \",\n      author: \"author 2\",\n      price: \"600\",\n    },\n    {\n      id: 3,\n      title: \"Book 3 \",\n      author: \"author 3\",\n      price: \"550\",\n    },\n  ],\n}; \n\nexport const bookSlice = createSlice({\n  name: \"books\",\n  initialState: {\n    isLoading :false,\n    books:[],\n    error:null\n  },\n  // reducers: {\n  //   showBooks: (state) => state,\n  //   addBook: (state, action) => {\n  //     state.books.push(action.payload);\n  //   },\n  //   deleteBook: (state, action) => {\n  //     const id = action.payload;\n  //     state.books = state.books.filter((book) => book.id !== id);\n  //   },\n  //   updateBook: (state, action) => {\n  //     const { id, title, author,price } = action.payload;\n  //     const isBookExist = state.books.filter((book) => book.id === id);\n  //     if (isBookExist) {\n  //       isBookExist[0].title = title;\n  //       isBookExist[0].author = author;\n  //       isBookExist[0].price = price;\n\n  //     }\n  //   },\n  // },\n  extraReducers : (builder) =>{\n    builder.addCase(fetchBooks.pending, (state) => {\n      state.isLoading = true\n    })\n    builder.addCase(fetchBooks.fulfilled, (state, action) => {\n      state.isLoading = false\n      state.items = action.payload\n      state.error = null\n    })\n    builder.addCase(fetchBooks.rejected, (state, action) => {\n      state.isLoading = false\n      state.items = [...state.items]\n      state.error = action.payload\n    })\n  }\n});\n\n//export const { showBooks, addBook, deleteBook, updateBook,booksLoading } = bookSlice.actions;\nexport default bookSlice.reducer;\n"],"mappings":"AAAA,SAASA,gBAAgB,EAAEC,WAAW,QAAQ,kBAAkB;AAChE,OAAOC,KAAK,MAAM,OAAO;AAEzB,OAAO,MAAMC,UAAU,GAAGH,gBAAgB,CAAC,kBAAkB,EAAE,YAAW;EACxE,MAAMI,GAAG,GAAG,MAAMF,KAAK,CAACG,GAAG,CAAC,iCAAiC,CAAC;EAC9DC,OAAO,CAACC,GAAG,CAACH,GAAG,CAACI,IAAI,CAAC;EACrB,OAAOJ,GAAG,CAACI,IAAI;AACjB,CAAC,CAAC;AACF,MAAMC,YAAY,GAAG;EACnBC,KAAK,EAAE,CACL;IACEC,EAAE,EAAE,CAAC;IACLC,KAAK,EAAE,SAAS;IAChBC,MAAM,EAAE,UAAU;IAClBC,KAAK,EAAE;EACT,CAAC,EACD;IACEH,EAAE,EAAE,CAAC;IACLC,KAAK,EAAE,SAAS;IAChBC,MAAM,EAAE,UAAU;IAClBC,KAAK,EAAE;EACT,CAAC,EACD;IACEH,EAAE,EAAE,CAAC;IACLC,KAAK,EAAE,SAAS;IAChBC,MAAM,EAAE,UAAU;IAClBC,KAAK,EAAE;EACT,CAAC;AAEL,CAAC;AAED,OAAO,MAAMC,SAAS,GAAGd,WAAW,CAAC;EACnCe,IAAI,EAAE,OAAO;EACbC,YAAY,EAAE;IACZC,SAAS,EAAE,KAAK;IAChBR,KAAK,EAAC,EAAE;IACRS,KAAK,EAAC;EACR,CAAC;EACD;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACAC,aAAa,EAAIC,OAAO,IAAI;IAC1BA,OAAO,CAACC,OAAO,CAACnB,UAAU,CAACoB,OAAO,EAAGC,KAAK,IAAK;MAC7CA,KAAK,CAACN,SAAS,GAAG,IAAI;IACxB,CAAC,CAAC;IACFG,OAAO,CAACC,OAAO,CAACnB,UAAU,CAACsB,SAAS,EAAE,CAACD,KAAK,EAAEE,MAAM,KAAK;MACvDF,KAAK,CAACN,SAAS,GAAG,KAAK;MACvBM,KAAK,CAACG,KAAK,GAAGD,MAAM,CAACE,OAAO;MAC5BJ,KAAK,CAACL,KAAK,GAAG,IAAI;IACpB,CAAC,CAAC;IACFE,OAAO,CAACC,OAAO,CAACnB,UAAU,CAAC0B,QAAQ,EAAE,CAACL,KAAK,EAAEE,MAAM,KAAK;MACtDF,KAAK,CAACN,SAAS,GAAG,KAAK;MACvBM,KAAK,CAACG,KAAK,GAAG,CAAC,GAAGH,KAAK,CAACG,KAAK,CAAC;MAC9BH,KAAK,CAACL,KAAK,GAAGO,MAAM,CAACE,OAAO;IAC9B,CAAC,CAAC;EACJ;AACF,CAAC,CAAC;;AAEF;AACA,eAAeb,SAAS,CAACe,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}